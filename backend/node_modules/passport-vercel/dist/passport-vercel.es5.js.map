{"version":3,"file":"passport-vercel.es5.js","sources":["../node_modules/passport-strategy/lib/strategy.js","../node_modules/passport-strategy/lib/index.js","../node_modules/uid2/index.js","../node_modules/base64url/dist/pad-string.js","../node_modules/base64url/dist/base64url.js","../node_modules/base64url/index.js","../node_modules/utils-merge/index.js","../node_modules/passport-oauth2/lib/utils.js","../node_modules/oauth/lib/sha1.js","../node_modules/oauth/lib/_utils.js","../node_modules/oauth/lib/oauth.js","../node_modules/oauth/lib/oauth2.js","../node_modules/oauth/index.js","../node_modules/passport-oauth2/lib/state/null.js","../node_modules/passport-oauth2/lib/state/session.js","../node_modules/passport-oauth2/lib/state/pkcesession.js","../node_modules/passport-oauth2/lib/errors/authorizationerror.js","../node_modules/passport-oauth2/lib/errors/tokenerror.js","../node_modules/passport-oauth2/lib/errors/internaloautherror.js","../node_modules/passport-oauth2/lib/strategy.js","../node_modules/passport-oauth2/lib/index.js","../src/profile.ts","../src/apiError.ts","../src/strategy.ts","../src/passport-vercel.ts"],"sourcesContent":["/**\n * Creates an instance of `Strategy`.\n *\n * @constructor\n * @api public\n */\nfunction Strategy() {\n}\n\n/**\n * Authenticate request.\n *\n * This function must be overridden by subclasses.  In abstract form, it always\n * throws an exception.\n *\n * @param {Object} req The request to authenticate.\n * @param {Object} [options] Strategy-specific options.\n * @api public\n */\nStrategy.prototype.authenticate = function(req, options) {\n  throw new Error('Strategy#authenticate must be overridden by subclass');\n};\n\n\n/**\n * Expose `Strategy`.\n */\nmodule.exports = Strategy;\n","/**\n * Module dependencies.\n */\nvar Strategy = require('./strategy');\n\n\n/**\n * Expose `Strategy` directly from package.\n */\nexports = module.exports = Strategy;\n\n/**\n * Export constructors.\n */\nexports.Strategy = Strategy;\n","/**\n * Module dependencies\n */\n\nvar crypto = require('crypto');\n\n/**\n * 62 characters in the ascii range that can be used in URLs without special\n * encoding.\n */\nvar UIDCHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n/**\n * Make a Buffer into a string ready for use in URLs\n *\n * @param {String}\n * @returns {String}\n * @api private\n */\nfunction tostr(bytes) {\n  var chars, r, i;\n\n  r = [];\n  for (i = 0; i < bytes.length; i++) {\n    r.push(UIDCHARS[bytes[i] % UIDCHARS.length]);\n  }\n\n  return r.join('');\n}\n\n/**\n * Generate an Unique Id\n *\n * @param {Number} length  The number of chars of the uid\n * @param {Number} cb (optional)  Callback for async uid generation\n * @api public\n */\n\nfunction uid(length, cb) {\n\n  if (typeof cb === 'undefined') {\n    return tostr(crypto.pseudoRandomBytes(length));\n  } else {\n    crypto.pseudoRandomBytes(length, function(err, bytes) {\n       if (err) return cb(err);\n       cb(null, tostr(bytes));\n    })\n  }\n}\n\n/**\n * Exports\n */\n\nmodule.exports = uid;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction padString(input) {\n    var segmentLength = 4;\n    var stringLength = input.length;\n    var diff = stringLength % segmentLength;\n    if (!diff) {\n        return input;\n    }\n    var position = stringLength;\n    var padLength = segmentLength - diff;\n    var paddedStringLength = stringLength + padLength;\n    var buffer = Buffer.alloc(paddedStringLength);\n    buffer.write(input);\n    while (padLength--) {\n        buffer.write(\"=\", position++);\n    }\n    return buffer.toString();\n}\nexports.default = padString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar pad_string_1 = require(\"./pad-string\");\nfunction encode(input, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    if (Buffer.isBuffer(input)) {\n        return fromBase64(input.toString(\"base64\"));\n    }\n    return fromBase64(Buffer.from(input, encoding).toString(\"base64\"));\n}\n;\nfunction decode(base64url, encoding) {\n    if (encoding === void 0) { encoding = \"utf8\"; }\n    return Buffer.from(toBase64(base64url), \"base64\").toString(encoding);\n}\nfunction toBase64(base64url) {\n    base64url = base64url.toString();\n    return pad_string_1.default(base64url)\n        .replace(/\\-/g, \"+\")\n        .replace(/_/g, \"/\");\n}\nfunction fromBase64(base64) {\n    return base64\n        .replace(/=/g, \"\")\n        .replace(/\\+/g, \"-\")\n        .replace(/\\//g, \"_\");\n}\nfunction toBuffer(base64url) {\n    return Buffer.from(toBase64(base64url), \"base64\");\n}\nvar base64url = encode;\nbase64url.encode = encode;\nbase64url.decode = decode;\nbase64url.toBase64 = toBase64;\nbase64url.fromBase64 = fromBase64;\nbase64url.toBuffer = toBuffer;\nexports.default = base64url;\n","module.exports = require('./dist/base64url').default;\nmodule.exports.default = module.exports;\n","/**\n * Merge object b with object a.\n *\n *     var a = { foo: 'bar' }\n *       , b = { bar: 'baz' };\n *\n *     merge(a, b);\n *     // => { foo: 'bar', bar: 'baz' }\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object}\n * @api public\n */\n\nexports = module.exports = function(a, b){\n  if (a && b) {\n    for (var key in b) {\n      a[key] = b[key];\n    }\n  }\n  return a;\n};\n","exports.merge = require('utils-merge');\n\n/**\n * Reconstructs the original URL of the request.\n *\n * This function builds a URL that corresponds the original URL requested by the\n * client, including the protocol (http or https) and host.\n *\n * If the request passed through any proxies that terminate SSL, the\n * `X-Forwarded-Proto` header is used to detect if the request was encrypted to\n * the proxy, assuming that the proxy has been flagged as trusted.\n *\n * @param {http.IncomingMessage} req\n * @param {Object} [options]\n * @return {String}\n * @api private\n */\nexports.originalURL = function(req, options) {\n  options = options || {};\n  var app = req.app;\n  if (app && app.get && app.get('trust proxy')) {\n    options.proxy = true;\n  }\n  var trustProxy = options.proxy;\n  \n  var proto = (req.headers['x-forwarded-proto'] || '').toLowerCase()\n    , tls = req.connection.encrypted || (trustProxy && 'https' == proto.split(/\\s*,\\s*/)[0])\n    , host = (trustProxy && req.headers['x-forwarded-host']) || req.headers.host\n    , protocol = tls ? 'https' : 'http'\n    , path = req.url || '';\n  return protocol + '://' + host + path;\n};\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS 180-1\n * Version 2.2 Copyright Paul Johnston 2000 - 2009.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\n/*\n * Configurable variables. You may need to tweak these to be compatible with\n * the server-side, but the defaults work in most cases.\n */\nvar hexcase = 1;  /* hex output format. 0 - lowercase; 1 - uppercase        */\nvar b64pad  = \"=\"; /* base-64 pad character. \"=\" for strict RFC compliance   */\n\n/*\n * These are the functions you'll usually want to call\n * They take string arguments and return either hex or base-64 encoded strings\n */\nfunction hex_sha1(s)    { return rstr2hex(rstr_sha1(str2rstr_utf8(s))); }\nfunction b64_sha1(s)    { return rstr2b64(rstr_sha1(str2rstr_utf8(s))); }\nfunction any_sha1(s, e) { return rstr2any(rstr_sha1(str2rstr_utf8(s)), e); }\nfunction hex_hmac_sha1(k, d)\n  { return rstr2hex(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d))); }\nfunction b64_hmac_sha1(k, d)\n  { return rstr2b64(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d))); }\nfunction any_hmac_sha1(k, d, e)\n  { return rstr2any(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)), e); }\n\n/*\n * Perform a simple self-test to see if the VM is working\n */\nfunction sha1_vm_test()\n{\n  return hex_sha1(\"abc\").toLowerCase() == \"a9993e364706816aba3e25717850c26c9cd0d89d\";\n}\n\n/*\n * Calculate the SHA1 of a raw string\n */\nfunction rstr_sha1(s)\n{\n  return binb2rstr(binb_sha1(rstr2binb(s), s.length * 8));\n}\n\n/*\n * Calculate the HMAC-SHA1 of a key and some data (raw strings)\n */\nfunction rstr_hmac_sha1(key, data)\n{\n  var bkey = rstr2binb(key);\n  if(bkey.length > 16) bkey = binb_sha1(bkey, key.length * 8);\n\n  var ipad = Array(16), opad = Array(16);\n  for(var i = 0; i < 16; i++)\n  {\n    ipad[i] = bkey[i] ^ 0x36363636;\n    opad[i] = bkey[i] ^ 0x5C5C5C5C;\n  }\n\n  var hash = binb_sha1(ipad.concat(rstr2binb(data)), 512 + data.length * 8);\n  return binb2rstr(binb_sha1(opad.concat(hash), 512 + 160));\n}\n\n/*\n * Convert a raw string to a hex string\n */\nfunction rstr2hex(input)\n{\n  try { hexcase } catch(e) { hexcase=0; }\n  var hex_tab = hexcase ? \"0123456789ABCDEF\" : \"0123456789abcdef\";\n  var output = \"\";\n  var x;\n  for(var i = 0; i < input.length; i++)\n  {\n    x = input.charCodeAt(i);\n    output += hex_tab.charAt((x >>> 4) & 0x0F)\n           +  hex_tab.charAt( x        & 0x0F);\n  }\n  return output;\n}\n\n/*\n * Convert a raw string to a base-64 string\n */\nfunction rstr2b64(input)\n{\n  try { b64pad } catch(e) { b64pad=''; }\n  var tab = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n  var output = \"\";\n  var len = input.length;\n  for(var i = 0; i < len; i += 3)\n  {\n    var triplet = (input.charCodeAt(i) << 16)\n                | (i + 1 < len ? input.charCodeAt(i+1) << 8 : 0)\n                | (i + 2 < len ? input.charCodeAt(i+2)      : 0);\n    for(var j = 0; j < 4; j++)\n    {\n      if(i * 8 + j * 6 > input.length * 8) output += b64pad;\n      else output += tab.charAt((triplet >>> 6*(3-j)) & 0x3F);\n    }\n  }\n  return output;\n}\n\n/*\n * Convert a raw string to an arbitrary string encoding\n */\nfunction rstr2any(input, encoding)\n{\n  var divisor = encoding.length;\n  var remainders = Array();\n  var i, q, x, quotient;\n\n  /* Convert to an array of 16-bit big-endian values, forming the dividend */\n  var dividend = Array(Math.ceil(input.length / 2));\n  for(i = 0; i < dividend.length; i++)\n  {\n    dividend[i] = (input.charCodeAt(i * 2) << 8) | input.charCodeAt(i * 2 + 1);\n  }\n\n  /*\n   * Repeatedly perform a long division. The binary array forms the dividend,\n   * the length of the encoding is the divisor. Once computed, the quotient\n   * forms the dividend for the next step. We stop when the dividend is zero.\n   * All remainders are stored for later use.\n   */\n  while(dividend.length > 0)\n  {\n    quotient = Array();\n    x = 0;\n    for(i = 0; i < dividend.length; i++)\n    {\n      x = (x << 16) + dividend[i];\n      q = Math.floor(x / divisor);\n      x -= q * divisor;\n      if(quotient.length > 0 || q > 0)\n        quotient[quotient.length] = q;\n    }\n    remainders[remainders.length] = x;\n    dividend = quotient;\n  }\n\n  /* Convert the remainders to the output string */\n  var output = \"\";\n  for(i = remainders.length - 1; i >= 0; i--)\n    output += encoding.charAt(remainders[i]);\n\n  /* Append leading zero equivalents */\n  var full_length = Math.ceil(input.length * 8 /\n                                    (Math.log(encoding.length) / Math.log(2)))\n  for(i = output.length; i < full_length; i++)\n    output = encoding[0] + output;\n\n  return output;\n}\n\n/*\n * Encode a string as utf-8.\n * For efficiency, this assumes the input is valid utf-16.\n */\nfunction str2rstr_utf8(input)\n{\n  var output = \"\";\n  var i = -1;\n  var x, y;\n\n  while(++i < input.length)\n  {\n    /* Decode utf-16 surrogate pairs */\n    x = input.charCodeAt(i);\n    y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;\n    if(0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF)\n    {\n      x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);\n      i++;\n    }\n\n    /* Encode output as utf-8 */\n    if(x <= 0x7F)\n      output += String.fromCharCode(x);\n    else if(x <= 0x7FF)\n      output += String.fromCharCode(0xC0 | ((x >>> 6 ) & 0x1F),\n                                    0x80 | ( x         & 0x3F));\n    else if(x <= 0xFFFF)\n      output += String.fromCharCode(0xE0 | ((x >>> 12) & 0x0F),\n                                    0x80 | ((x >>> 6 ) & 0x3F),\n                                    0x80 | ( x         & 0x3F));\n    else if(x <= 0x1FFFFF)\n      output += String.fromCharCode(0xF0 | ((x >>> 18) & 0x07),\n                                    0x80 | ((x >>> 12) & 0x3F),\n                                    0x80 | ((x >>> 6 ) & 0x3F),\n                                    0x80 | ( x         & 0x3F));\n  }\n  return output;\n}\n\n/*\n * Encode a string as utf-16\n */\nfunction str2rstr_utf16le(input)\n{\n  var output = \"\";\n  for(var i = 0; i < input.length; i++)\n    output += String.fromCharCode( input.charCodeAt(i)        & 0xFF,\n                                  (input.charCodeAt(i) >>> 8) & 0xFF);\n  return output;\n}\n\nfunction str2rstr_utf16be(input)\n{\n  var output = \"\";\n  for(var i = 0; i < input.length; i++)\n    output += String.fromCharCode((input.charCodeAt(i) >>> 8) & 0xFF,\n                                   input.charCodeAt(i)        & 0xFF);\n  return output;\n}\n\n/*\n * Convert a raw string to an array of big-endian words\n * Characters >255 have their high-byte silently ignored.\n */\nfunction rstr2binb(input)\n{\n  var output = Array(input.length >> 2);\n  for(var i = 0; i < output.length; i++)\n    output[i] = 0;\n  for(var i = 0; i < input.length * 8; i += 8)\n    output[i>>5] |= (input.charCodeAt(i / 8) & 0xFF) << (24 - i % 32);\n  return output;\n}\n\n/*\n * Convert an array of big-endian words to a string\n */\nfunction binb2rstr(input)\n{\n  var output = \"\";\n  for(var i = 0; i < input.length * 32; i += 8)\n    output += String.fromCharCode((input[i>>5] >>> (24 - i % 32)) & 0xFF);\n  return output;\n}\n\n/*\n * Calculate the SHA-1 of an array of big-endian words, and a bit length\n */\nfunction binb_sha1(x, len)\n{\n  /* append padding */\n  x[len >> 5] |= 0x80 << (24 - len % 32);\n  x[((len + 64 >> 9) << 4) + 15] = len;\n\n  var w = Array(80);\n  var a =  1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d =  271733878;\n  var e = -1009589776;\n\n  for(var i = 0; i < x.length; i += 16)\n  {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    var olde = e;\n\n    for(var j = 0; j < 80; j++)\n    {\n      if(j < 16) w[j] = x[i + j];\n      else w[j] = bit_rol(w[j-3] ^ w[j-8] ^ w[j-14] ^ w[j-16], 1);\n      var t = safe_add(safe_add(bit_rol(a, 5), sha1_ft(j, b, c, d)),\n                       safe_add(safe_add(e, w[j]), sha1_kt(j)));\n      e = d;\n      d = c;\n      c = bit_rol(b, 30);\n      b = a;\n      a = t;\n    }\n\n    a = safe_add(a, olda);\n    b = safe_add(b, oldb);\n    c = safe_add(c, oldc);\n    d = safe_add(d, oldd);\n    e = safe_add(e, olde);\n  }\n  return Array(a, b, c, d, e);\n\n}\n\n/*\n * Perform the appropriate triplet combination function for the current\n * iteration\n */\nfunction sha1_ft(t, b, c, d)\n{\n  if(t < 20) return (b & c) | ((~b) & d);\n  if(t < 40) return b ^ c ^ d;\n  if(t < 60) return (b & c) | (b & d) | (c & d);\n  return b ^ c ^ d;\n}\n\n/*\n * Determine the appropriate additive constant for the current iteration\n */\nfunction sha1_kt(t)\n{\n  return (t < 20) ?  1518500249 : (t < 40) ?  1859775393 :\n         (t < 60) ? -1894007588 : -899497514;\n}\n\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\nfunction safe_add(x, y)\n{\n  var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return (msw << 16) | (lsw & 0xFFFF);\n}\n\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\nfunction bit_rol(num, cnt)\n{\n  return (num << cnt) | (num >>> (32 - cnt));\n}\n\nexports.HMACSHA1= function(key, data) {\n  return b64_hmac_sha1(key, data);\n}","// Returns true if this is a host that closes *before* it ends?!?!\nmodule.exports.isAnEarlyCloseHost= function( hostName ) {\n  return hostName && hostName.match(\".*google(apis)?.com$\")\n}","var crypto= require('crypto'),\n    sha1= require('./sha1'),\n    http= require('http'),\n    https= require('https'),\n    URL= require('url'),\n    querystring= require('querystring'),\n    OAuthUtils= require('./_utils');\n\nexports.OAuth= function(requestUrl, accessUrl, consumerKey, consumerSecret, version, authorize_callback, signatureMethod, nonceSize, customHeaders) {\n  this._isEcho = false;\n\n  this._requestUrl= requestUrl;\n  this._accessUrl= accessUrl;\n  this._consumerKey= consumerKey;\n  this._consumerSecret= this._encodeData( consumerSecret );\n  if (signatureMethod == \"RSA-SHA1\") {\n    this._privateKey = consumerSecret;\n  }\n  this._version= version;\n  if( authorize_callback === undefined ) {\n    this._authorize_callback= \"oob\";\n  }\n  else {\n    this._authorize_callback= authorize_callback;\n  }\n\n  if( signatureMethod != \"PLAINTEXT\" && signatureMethod != \"HMAC-SHA1\" && signatureMethod != \"RSA-SHA1\")\n    throw new Error(\"Un-supported signature method: \" + signatureMethod )\n  this._signatureMethod= signatureMethod;\n  this._nonceSize= nonceSize || 32;\n  this._headers= customHeaders || {\"Accept\" : \"*/*\",\n                                   \"Connection\" : \"close\",\n                                   \"User-Agent\" : \"Node authentication\"}\n  this._clientOptions= this._defaultClientOptions= {\"requestTokenHttpMethod\": \"POST\",\n                                                    \"accessTokenHttpMethod\": \"POST\",\n                                                    \"followRedirects\": true};\n  this._oauthParameterSeperator = \",\";\n};\n\nexports.OAuthEcho= function(realm, verify_credentials, consumerKey, consumerSecret, version, signatureMethod, nonceSize, customHeaders) {\n  this._isEcho = true;\n\n  this._realm= realm;\n  this._verifyCredentials = verify_credentials;\n  this._consumerKey= consumerKey;\n  this._consumerSecret= this._encodeData( consumerSecret );\n  if (signatureMethod == \"RSA-SHA1\") {\n    this._privateKey = consumerSecret;\n  }\n  this._version= version;\n\n  if( signatureMethod != \"PLAINTEXT\" && signatureMethod != \"HMAC-SHA1\" && signatureMethod != \"RSA-SHA1\")\n    throw new Error(\"Un-supported signature method: \" + signatureMethod );\n  this._signatureMethod= signatureMethod;\n  this._nonceSize= nonceSize || 32;\n  this._headers= customHeaders || {\"Accept\" : \"*/*\",\n                                   \"Connection\" : \"close\",\n                                   \"User-Agent\" : \"Node authentication\"};\n  this._oauthParameterSeperator = \",\";\n}\n\nexports.OAuthEcho.prototype = exports.OAuth.prototype;\n\nexports.OAuth.prototype._getTimestamp= function() {\n  return Math.floor( (new Date()).getTime() / 1000 );\n}\n\nexports.OAuth.prototype._encodeData= function(toEncode){\n if( toEncode == null || toEncode == \"\" ) return \"\"\n else {\n    var result= encodeURIComponent(toEncode);\n    // Fix the mismatch between OAuth's  RFC3986's and Javascript's beliefs in what is right and wrong ;)\n    return result.replace(/\\!/g, \"%21\")\n                 .replace(/\\'/g, \"%27\")\n                 .replace(/\\(/g, \"%28\")\n                 .replace(/\\)/g, \"%29\")\n                 .replace(/\\*/g, \"%2A\");\n }\n}\n\nexports.OAuth.prototype._decodeData= function(toDecode) {\n  if( toDecode != null ) {\n    toDecode = toDecode.replace(/\\+/g, \" \");\n  }\n  return decodeURIComponent( toDecode);\n}\n\nexports.OAuth.prototype._getSignature= function(method, url, parameters, tokenSecret) {\n  var signatureBase= this._createSignatureBase(method, url, parameters);\n  return this._createSignature( signatureBase, tokenSecret );\n}\n\nexports.OAuth.prototype._normalizeUrl= function(url) {\n  var parsedUrl= URL.parse(url, true)\n   var port =\"\";\n   if( parsedUrl.port ) {\n     if( (parsedUrl.protocol == \"http:\" && parsedUrl.port != \"80\" ) ||\n         (parsedUrl.protocol == \"https:\" && parsedUrl.port != \"443\") ) {\n           port= \":\" + parsedUrl.port;\n         }\n   }\n\n  if( !parsedUrl.pathname  || parsedUrl.pathname == \"\" ) parsedUrl.pathname =\"/\";\n\n  return parsedUrl.protocol + \"//\" + parsedUrl.hostname + port + parsedUrl.pathname;\n}\n\n// Is the parameter considered an OAuth parameter\nexports.OAuth.prototype._isParameterNameAnOAuthParameter= function(parameter) {\n  var m = parameter.match('^oauth_');\n  if( m && ( m[0] === \"oauth_\" ) ) {\n    return true;\n  }\n  else {\n    return false;\n  }\n};\n\n// build the OAuth request authorization header\nexports.OAuth.prototype._buildAuthorizationHeaders= function(orderedParameters) {\n  var authHeader=\"OAuth \";\n  if( this._isEcho ) {\n    authHeader += 'realm=\"' + this._realm + '\",';\n  }\n\n  for( var i= 0 ; i < orderedParameters.length; i++) {\n     // Whilst the all the parameters should be included within the signature, only the oauth_ arguments\n     // should appear within the authorization header.\n     if( this._isParameterNameAnOAuthParameter(orderedParameters[i][0]) ) {\n      authHeader+= \"\" + this._encodeData(orderedParameters[i][0])+\"=\\\"\"+ this._encodeData(orderedParameters[i][1])+\"\\\"\"+ this._oauthParameterSeperator;\n     }\n  }\n\n  authHeader= authHeader.substring(0, authHeader.length-this._oauthParameterSeperator.length);\n  return authHeader;\n}\n\n// Takes an object literal that represents the arguments, and returns an array\n// of argument/value pairs.\nexports.OAuth.prototype._makeArrayOfArgumentsHash= function(argumentsHash) {\n  var argument_pairs= [];\n  for(var key in argumentsHash ) {\n    if (argumentsHash.hasOwnProperty(key)) {\n       var value= argumentsHash[key];\n       if( Array.isArray(value) ) {\n         for(var i=0;i<value.length;i++) {\n           argument_pairs[argument_pairs.length]= [key, value[i]];\n         }\n       }\n       else {\n         argument_pairs[argument_pairs.length]= [key, value];\n       }\n    }\n  }\n  return argument_pairs;\n}\n\n// Sorts the encoded key value pairs by encoded name, then encoded value\nexports.OAuth.prototype._sortRequestParams= function(argument_pairs) {\n  // Sort by name, then value.\n  argument_pairs.sort(function(a,b) {\n      if ( a[0]== b[0] )  {\n        return a[1] < b[1] ? -1 : 1;\n      }\n      else return a[0] < b[0] ? -1 : 1;\n  });\n\n  return argument_pairs;\n}\n\nexports.OAuth.prototype._normaliseRequestParams= function(args) {\n  var argument_pairs= this._makeArrayOfArgumentsHash(args);\n  // First encode them #3.4.1.3.2 .1\n  for(var i=0;i<argument_pairs.length;i++) {\n    argument_pairs[i][0]= this._encodeData( argument_pairs[i][0] );\n    argument_pairs[i][1]= this._encodeData( argument_pairs[i][1] );\n  }\n\n  // Then sort them #3.4.1.3.2 .2\n  argument_pairs= this._sortRequestParams( argument_pairs );\n\n  // Then concatenate together #3.4.1.3.2 .3 & .4\n  var args= \"\";\n  for(var i=0;i<argument_pairs.length;i++) {\n      args+= argument_pairs[i][0];\n      args+= \"=\"\n      args+= argument_pairs[i][1];\n      if( i < argument_pairs.length-1 ) args+= \"&\";\n  }\n  return args;\n}\n\nexports.OAuth.prototype._createSignatureBase= function(method, url, parameters) {\n  url= this._encodeData( this._normalizeUrl(url) );\n  parameters= this._encodeData( parameters );\n  return method.toUpperCase() + \"&\" + url + \"&\" + parameters;\n}\n\nexports.OAuth.prototype._createSignature= function(signatureBase, tokenSecret) {\n   if( tokenSecret === undefined ) var tokenSecret= \"\";\n   else tokenSecret= this._encodeData( tokenSecret );\n   // consumerSecret is already encoded\n   var key= this._consumerSecret + \"&\" + tokenSecret;\n\n   var hash= \"\"\n   if( this._signatureMethod == \"PLAINTEXT\" ) {\n     hash= key;\n   }\n   else if (this._signatureMethod == \"RSA-SHA1\") {\n     key = this._privateKey || \"\";\n     hash= crypto.createSign(\"RSA-SHA1\").update(signatureBase).sign(key, 'base64');\n   }\n   else {\n       if( crypto.Hmac ) {\n         hash = crypto.createHmac(\"sha1\", key).update(signatureBase).digest(\"base64\");\n       }\n       else {\n         hash= sha1.HMACSHA1(key, signatureBase);\n       }\n   }\n   return hash;\n}\nexports.OAuth.prototype.NONCE_CHARS= ['a','b','c','d','e','f','g','h','i','j','k','l','m','n',\n              'o','p','q','r','s','t','u','v','w','x','y','z','A','B',\n              'C','D','E','F','G','H','I','J','K','L','M','N','O','P',\n              'Q','R','S','T','U','V','W','X','Y','Z','0','1','2','3',\n              '4','5','6','7','8','9'];\n\nexports.OAuth.prototype._getNonce= function(nonceSize) {\n   var result = [];\n   var chars= this.NONCE_CHARS;\n   var char_pos;\n   var nonce_chars_length= chars.length;\n\n   for (var i = 0; i < nonceSize; i++) {\n       char_pos= Math.floor(Math.random() * nonce_chars_length);\n       result[i]=  chars[char_pos];\n   }\n   return result.join('');\n}\n\nexports.OAuth.prototype._createClient= function( port, hostname, method, path, headers, sslEnabled ) {\n  var options = {\n    host: hostname,\n    port: port,\n    path: path,\n    method: method,\n    headers: headers\n  };\n  var httpModel;\n  if( sslEnabled ) {\n    httpModel= https;\n  } else {\n    httpModel= http;\n  }\n  return httpModel.request(options);\n}\n\nexports.OAuth.prototype._prepareParameters= function( oauth_token, oauth_token_secret, method, url, extra_params ) {\n  var oauthParameters= {\n      \"oauth_timestamp\":        this._getTimestamp(),\n      \"oauth_nonce\":            this._getNonce(this._nonceSize),\n      \"oauth_version\":          this._version,\n      \"oauth_signature_method\": this._signatureMethod,\n      \"oauth_consumer_key\":     this._consumerKey\n  };\n\n  if( oauth_token ) {\n    oauthParameters[\"oauth_token\"]= oauth_token;\n  }\n\n  var sig;\n  if( this._isEcho ) {\n    sig = this._getSignature( \"GET\",  this._verifyCredentials,  this._normaliseRequestParams(oauthParameters), oauth_token_secret);\n  }\n  else {\n    if( extra_params ) {\n      for( var key in extra_params ) {\n        if (extra_params.hasOwnProperty(key)) oauthParameters[key]= extra_params[key];\n      }\n    }\n    var parsedUrl= URL.parse( url, false );\n\n    if( parsedUrl.query ) {\n      var key2;\n      var extraParameters= querystring.parse(parsedUrl.query);\n      for(var key in extraParameters ) {\n        var value= extraParameters[key];\n          if( typeof value == \"object\" ){\n            // TODO: This probably should be recursive\n            for(key2 in value){\n              oauthParameters[key + \"[\" + key2 + \"]\"] = value[key2];\n            }\n          } else {\n            oauthParameters[key]= value;\n          }\n        }\n    }\n\n    sig = this._getSignature( method,  url,  this._normaliseRequestParams(oauthParameters), oauth_token_secret);\n  }\n\n  var orderedParameters= this._sortRequestParams( this._makeArrayOfArgumentsHash(oauthParameters) );\n  orderedParameters[orderedParameters.length]= [\"oauth_signature\", sig];\n  return orderedParameters;\n}\n\nexports.OAuth.prototype._performSecureRequest= function( oauth_token, oauth_token_secret, method, url, extra_params, post_body, post_content_type,  callback ) {\n  var orderedParameters= this._prepareParameters(oauth_token, oauth_token_secret, method, url, extra_params);\n\n  if( !post_content_type ) {\n    post_content_type= \"application/x-www-form-urlencoded\";\n  }\n  var parsedUrl= URL.parse( url, false );\n  if( parsedUrl.protocol == \"http:\" && !parsedUrl.port ) parsedUrl.port= 80;\n  if( parsedUrl.protocol == \"https:\" && !parsedUrl.port ) parsedUrl.port= 443;\n\n  var headers= {};\n  var authorization = this._buildAuthorizationHeaders(orderedParameters);\n  if ( this._isEcho ) {\n    headers[\"X-Verify-Credentials-Authorization\"]= authorization;\n  }\n  else {\n    headers[\"Authorization\"]= authorization;\n  }\n\n  headers[\"Host\"] = parsedUrl.host\n\n  for( var key in this._headers ) {\n    if (this._headers.hasOwnProperty(key)) {\n      headers[key]= this._headers[key];\n    }\n  }\n\n  // Filter out any passed extra_params that are really to do with OAuth\n  for(var key in extra_params) {\n    if( this._isParameterNameAnOAuthParameter( key ) ) {\n      delete extra_params[key];\n    }\n  }\n\n  if( (method == \"POST\" || method == \"PUT\")  && ( post_body == null && extra_params != null) ) {\n    // Fix the mismatch between the output of querystring.stringify() and this._encodeData()\n    post_body= querystring.stringify(extra_params)\n                       .replace(/\\!/g, \"%21\")\n                       .replace(/\\'/g, \"%27\")\n                       .replace(/\\(/g, \"%28\")\n                       .replace(/\\)/g, \"%29\")\n                       .replace(/\\*/g, \"%2A\");\n  }\n\n  if( post_body ) {\n      if ( Buffer.isBuffer(post_body) ) {\n          headers[\"Content-length\"]= post_body.length;\n      } else {\n          headers[\"Content-length\"]= Buffer.byteLength(post_body);\n      }\n  } else {\n      headers[\"Content-length\"]= 0;\n  }\n\n  headers[\"Content-Type\"]= post_content_type;\n\n  var path;\n  if( !parsedUrl.pathname  || parsedUrl.pathname == \"\" ) parsedUrl.pathname =\"/\";\n  if( parsedUrl.query ) path= parsedUrl.pathname + \"?\"+ parsedUrl.query ;\n  else path= parsedUrl.pathname;\n\n  var request;\n  if( parsedUrl.protocol == \"https:\" ) {\n    request= this._createClient(parsedUrl.port, parsedUrl.hostname, method, path, headers, true);\n  }\n  else {\n    request= this._createClient(parsedUrl.port, parsedUrl.hostname, method, path, headers);\n  }\n\n  var clientOptions = this._clientOptions;\n  if( callback ) {\n    var data=\"\";\n    var self= this;\n\n    // Some hosts *cough* google appear to close the connection early / send no content-length header\n    // allow this behaviour.\n    var allowEarlyClose= OAuthUtils.isAnEarlyCloseHost( parsedUrl.hostname );\n    var callbackCalled= false;\n    var passBackControl = function( response ) {\n      if(!callbackCalled) {\n        callbackCalled= true;\n        if ( response.statusCode >= 200 && response.statusCode <= 299 ) {\n          callback(null, data, response);\n        } else {\n          // Follow 301 or 302 redirects with Location HTTP header\n          if((response.statusCode == 301 || response.statusCode == 302) && clientOptions.followRedirects && response.headers && response.headers.location) {\n            self._performSecureRequest( oauth_token, oauth_token_secret, method, response.headers.location, extra_params, post_body, post_content_type,  callback);\n          }\n          else {\n            callback({ statusCode: response.statusCode, data: data }, data, response);\n          }\n        }\n      }\n    }\n\n    request.on('response', function (response) {\n      response.setEncoding('utf8');\n      response.on('data', function (chunk) {\n        data+=chunk;\n      });\n      response.on('end', function () {\n        passBackControl( response );\n      });\n      response.on('close', function () {\n        if( allowEarlyClose ) {\n          passBackControl( response );\n        }\n      });\n    });\n\n    request.on(\"error\", function(err) {\n      if(!callbackCalled) {\n        callbackCalled= true;\n        callback( err )\n      }\n    });\n\n    if( (method == \"POST\" || method ==\"PUT\") && post_body != null && post_body != \"\" ) {\n      request.write(post_body);\n    }\n    request.end();\n  }\n  else {\n    if( (method == \"POST\" || method ==\"PUT\") && post_body != null && post_body != \"\" ) {\n      request.write(post_body);\n    }\n    return request;\n  }\n\n  return;\n}\n\nexports.OAuth.prototype.setClientOptions= function(options) {\n  var key,\n      mergedOptions= {},\n      hasOwnProperty= Object.prototype.hasOwnProperty;\n\n  for( key in this._defaultClientOptions ) {\n    if( !hasOwnProperty.call(options, key) ) {\n      mergedOptions[key]= this._defaultClientOptions[key];\n    } else {\n      mergedOptions[key]= options[key];\n    }\n  }\n\n  this._clientOptions= mergedOptions;\n};\n\nexports.OAuth.prototype.getOAuthAccessToken= function(oauth_token, oauth_token_secret, oauth_verifier,  callback) {\n  var extraParams= {};\n  if( typeof oauth_verifier == \"function\" ) {\n    callback= oauth_verifier;\n  } else {\n    extraParams.oauth_verifier= oauth_verifier;\n  }\n\n   this._performSecureRequest( oauth_token, oauth_token_secret, this._clientOptions.accessTokenHttpMethod, this._accessUrl, extraParams, null, null, function(error, data, response) {\n         if( error ) callback(error);\n         else {\n           var results= querystring.parse( data );\n           var oauth_access_token= results[\"oauth_token\"];\n           delete results[\"oauth_token\"];\n           var oauth_access_token_secret= results[\"oauth_token_secret\"];\n           delete results[\"oauth_token_secret\"];\n           callback(null, oauth_access_token, oauth_access_token_secret, results );\n         }\n   })\n}\n\n// Deprecated\nexports.OAuth.prototype.getProtectedResource= function(url, method, oauth_token, oauth_token_secret, callback) {\n  this._performSecureRequest( oauth_token, oauth_token_secret, method, url, null, \"\", null, callback );\n}\n\nexports.OAuth.prototype.delete= function(url, oauth_token, oauth_token_secret, callback) {\n  return this._performSecureRequest( oauth_token, oauth_token_secret, \"DELETE\", url, null, \"\", null, callback );\n}\n\nexports.OAuth.prototype.get= function(url, oauth_token, oauth_token_secret, callback) {\n  return this._performSecureRequest( oauth_token, oauth_token_secret, \"GET\", url, null, \"\", null, callback );\n}\n\nexports.OAuth.prototype._putOrPost= function(method, url, oauth_token, oauth_token_secret, post_body, post_content_type, callback) {\n  var extra_params= null;\n  if( typeof post_content_type == \"function\" ) {\n    callback= post_content_type;\n    post_content_type= null;\n  }\n  if ( typeof post_body != \"string\" && !Buffer.isBuffer(post_body) ) {\n    post_content_type= \"application/x-www-form-urlencoded\"\n    extra_params= post_body;\n    post_body= null;\n  }\n  return this._performSecureRequest( oauth_token, oauth_token_secret, method, url, extra_params, post_body, post_content_type, callback );\n}\n\n\nexports.OAuth.prototype.put= function(url, oauth_token, oauth_token_secret, post_body, post_content_type, callback) {\n  return this._putOrPost(\"PUT\", url, oauth_token, oauth_token_secret, post_body, post_content_type, callback);\n}\n\nexports.OAuth.prototype.post= function(url, oauth_token, oauth_token_secret, post_body, post_content_type, callback) {\n  return this._putOrPost(\"POST\", url, oauth_token, oauth_token_secret, post_body, post_content_type, callback);\n}\n\n/**\n * Gets a request token from the OAuth provider and passes that information back\n * to the calling code.\n *\n * The callback should expect a function of the following form:\n *\n * function(err, token, token_secret, parsedQueryString) {}\n *\n * This method has optional parameters so can be called in the following 2 ways:\n *\n * 1) Primary use case: Does a basic request with no extra parameters\n *  getOAuthRequestToken( callbackFunction )\n *\n * 2) As above but allows for provision of extra parameters to be sent as part of the query to the server.\n *  getOAuthRequestToken( extraParams, callbackFunction )\n *\n * N.B. This method will HTTP POST verbs by default, if you wish to override this behaviour you will\n * need to provide a requestTokenHttpMethod option when creating the client.\n *\n **/\nexports.OAuth.prototype.getOAuthRequestToken= function( extraParams, callback ) {\n   if( typeof extraParams == \"function\" ){\n     callback = extraParams;\n     extraParams = {};\n   }\n  // Callbacks are 1.0A related\n  if( this._authorize_callback ) {\n    extraParams[\"oauth_callback\"]= this._authorize_callback;\n  }\n  this._performSecureRequest( null, null, this._clientOptions.requestTokenHttpMethod, this._requestUrl, extraParams, null, null, function(error, data, response) {\n    if( error ) callback(error);\n    else {\n      var results= querystring.parse(data);\n\n      var oauth_token= results[\"oauth_token\"];\n      var oauth_token_secret= results[\"oauth_token_secret\"];\n      delete results[\"oauth_token\"];\n      delete results[\"oauth_token_secret\"];\n      callback(null, oauth_token, oauth_token_secret,  results );\n    }\n  });\n}\n\nexports.OAuth.prototype.signUrl= function(url, oauth_token, oauth_token_secret, method) {\n\n  if( method === undefined ) {\n    var method= \"GET\";\n  }\n\n  var orderedParameters= this._prepareParameters(oauth_token, oauth_token_secret, method, url, {});\n  var parsedUrl= URL.parse( url, false );\n\n  var query=\"\";\n  for( var i= 0 ; i < orderedParameters.length; i++) {\n    query+= orderedParameters[i][0]+\"=\"+ this._encodeData(orderedParameters[i][1]) + \"&\";\n  }\n  query= query.substring(0, query.length-1);\n\n  return parsedUrl.protocol + \"//\"+ parsedUrl.host + parsedUrl.pathname + \"?\" + query;\n};\n\nexports.OAuth.prototype.authHeader= function(url, oauth_token, oauth_token_secret, method) {\n  if( method === undefined ) {\n    var method= \"GET\";\n  }\n\n  var orderedParameters= this._prepareParameters(oauth_token, oauth_token_secret, method, url, {});\n  return this._buildAuthorizationHeaders(orderedParameters);\n};\n","var querystring= require('querystring'),\n    crypto= require('crypto'),\n    https= require('https'),\n    http= require('http'),\n    URL= require('url'),\n    OAuthUtils= require('./_utils');\n\nexports.OAuth2= function(clientId, clientSecret, baseSite, authorizePath, accessTokenPath, customHeaders) {\n  this._clientId= clientId;\n  this._clientSecret= clientSecret;\n  this._baseSite= baseSite;\n  this._authorizeUrl= authorizePath || \"/oauth/authorize\";\n  this._accessTokenUrl= accessTokenPath || \"/oauth/access_token\";\n  this._accessTokenName= \"access_token\";\n  this._authMethod= \"Bearer\";\n  this._customHeaders = customHeaders || {};\n  this._useAuthorizationHeaderForGET= false;\n\n  //our agent\n  this._agent = undefined;\n};\n\n// Allows you to set an agent to use instead of the default HTTP or\n// HTTPS agents. Useful when dealing with your own certificates.\nexports.OAuth2.prototype.setAgent = function(agent) {\n  this._agent = agent;\n};\n\n// This 'hack' method is required for sites that don't use\n// 'access_token' as the name of the access token (for requests).\n// ( http://tools.ietf.org/html/draft-ietf-oauth-v2-16#section-7 )\n// it isn't clear what the correct value should be atm, so allowing\n// for specific (temporary?) override for now.\nexports.OAuth2.prototype.setAccessTokenName= function ( name ) {\n  this._accessTokenName= name;\n}\n\n// Sets the authorization method for Authorization header.\n// e.g. Authorization: Bearer <token>  # \"Bearer\" is the authorization method.\nexports.OAuth2.prototype.setAuthMethod = function ( authMethod ) {\n  this._authMethod = authMethod;\n};\n\n\n// If you use the OAuth2 exposed 'get' method (and don't construct your own _request call )\n// this will specify whether to use an 'Authorize' header instead of passing the access_token as a query parameter\nexports.OAuth2.prototype.useAuthorizationHeaderforGET = function(useIt) {\n  this._useAuthorizationHeaderForGET= useIt;\n}\n\nexports.OAuth2.prototype._getAccessTokenUrl= function() {\n  return this._baseSite + this._accessTokenUrl; /* + \"?\" + querystring.stringify(params); */\n}\n\n// Build the authorization header. In particular, build the part after the colon.\n// e.g. Authorization: Bearer <token>  # Build \"Bearer <token>\"\nexports.OAuth2.prototype.buildAuthHeader= function(token) {\n  return this._authMethod + ' ' + token;\n};\n\nexports.OAuth2.prototype._chooseHttpLibrary= function( parsedUrl ) {\n  var http_library= https;\n  // As this is OAUth2, we *assume* https unless told explicitly otherwise.\n  if( parsedUrl.protocol != \"https:\" ) {\n    http_library= http;\n  }\n  return http_library;\n};\n\nexports.OAuth2.prototype._request= function(method, url, headers, post_body, access_token, callback) {\n\n  var parsedUrl= URL.parse( url, true );\n  if( parsedUrl.protocol == \"https:\" && !parsedUrl.port ) {\n    parsedUrl.port= 443;\n  }\n\n  var http_library= this._chooseHttpLibrary( parsedUrl );\n\n\n  var realHeaders= {};\n  for( var key in this._customHeaders ) {\n    realHeaders[key]= this._customHeaders[key];\n  }\n  if( headers ) {\n    for(var key in headers) {\n      realHeaders[key] = headers[key];\n    }\n  }\n  realHeaders['Host']= parsedUrl.host;\n\n  if (!realHeaders['User-Agent']) {\n    realHeaders['User-Agent'] = 'Node-oauth';\n  }\n\n  if( post_body ) {\n      if ( Buffer.isBuffer(post_body) ) {\n          realHeaders[\"Content-Length\"]= post_body.length;\n      } else {\n          realHeaders[\"Content-Length\"]= Buffer.byteLength(post_body);\n      }\n  } else {\n      realHeaders[\"Content-length\"]= 0;\n  }\n\n  if( access_token && !('Authorization' in realHeaders)) {\n    if( ! parsedUrl.query ) parsedUrl.query= {};\n    parsedUrl.query[this._accessTokenName]= access_token;\n  }\n\n  var queryStr= querystring.stringify(parsedUrl.query);\n  if( queryStr ) queryStr=  \"?\" + queryStr;\n  var options = {\n    host:parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.pathname + queryStr,\n    method: method,\n    headers: realHeaders\n  };\n\n  this._executeRequest( http_library, options, post_body, callback );\n}\n\nexports.OAuth2.prototype._executeRequest= function( http_library, options, post_body, callback ) {\n  // Some hosts *cough* google appear to close the connection early / send no content-length header\n  // allow this behaviour.\n  var allowEarlyClose= OAuthUtils.isAnEarlyCloseHost(options.host);\n  var callbackCalled= false;\n  function passBackControl( response, result ) {\n    if(!callbackCalled) {\n      callbackCalled=true;\n      if( !(response.statusCode >= 200 && response.statusCode <= 299) && (response.statusCode != 301) && (response.statusCode != 302) ) {\n        callback({ statusCode: response.statusCode, data: result });\n      } else {\n        callback(null, result, response);\n      }\n    }\n  }\n\n  var result= \"\";\n\n  //set the agent on the request options\n  if (this._agent) {\n    options.agent = this._agent;\n  }\n\n  var request = http_library.request(options);\n  request.on('response', function (response) {\n    response.on(\"data\", function (chunk) {\n      result+= chunk\n    });\n    response.on(\"close\", function (err) {\n      if( allowEarlyClose ) {\n        passBackControl( response, result );\n      }\n    });\n    response.addListener(\"end\", function () {\n      passBackControl( response, result );\n    });\n  });\n  request.on('error', function(e) {\n    callbackCalled= true;\n    callback(e);\n  });\n\n  if( (options.method == 'POST' || options.method == 'PUT') && post_body ) {\n     request.write(post_body);\n  }\n  request.end();\n}\n\nexports.OAuth2.prototype.getAuthorizeUrl= function( params ) {\n  var params= params || {};\n  params['client_id'] = this._clientId;\n  return this._baseSite + this._authorizeUrl + \"?\" + querystring.stringify(params);\n}\n\nexports.OAuth2.prototype.getOAuthAccessToken= function(code, params, callback) {\n  var params= params || {};\n  params['client_id'] = this._clientId;\n  params['client_secret'] = this._clientSecret;\n  var codeParam = (params.grant_type === 'refresh_token') ? 'refresh_token' : 'code';\n  params[codeParam]= code;\n\n  var post_data= querystring.stringify( params );\n  var post_headers= {\n       'Content-Type': 'application/x-www-form-urlencoded'\n   };\n\n\n  this._request(\"POST\", this._getAccessTokenUrl(), post_headers, post_data, null, function(error, data, response) {\n    if( error )  callback(error);\n    else {\n      var results;\n      try {\n        // As of http://tools.ietf.org/html/draft-ietf-oauth-v2-07\n        // responses should be in JSON\n        results= JSON.parse( data );\n      }\n      catch(e) {\n        // .... However both Facebook + Github currently use rev05 of the spec\n        // and neither seem to specify a content-type correctly in their response headers :(\n        // clients of these services will suffer a *minor* performance cost of the exception\n        // being thrown\n        results= querystring.parse( data );\n      }\n      var access_token= results[\"access_token\"];\n      var refresh_token= results[\"refresh_token\"];\n      delete results[\"refresh_token\"];\n      callback(null, access_token, refresh_token, results); // callback results =-=\n    }\n  });\n}\n\n// Deprecated\nexports.OAuth2.prototype.getProtectedResource= function(url, access_token, callback) {\n  this._request(\"GET\", url, {}, \"\", access_token, callback );\n}\n\nexports.OAuth2.prototype.get= function(url, access_token, callback) {\n  if( this._useAuthorizationHeaderForGET ) {\n    var headers= {'Authorization': this.buildAuthHeader(access_token) }\n    access_token= null;\n  }\n  else {\n    headers= {};\n  }\n  this._request(\"GET\", url, headers, \"\", access_token, callback );\n}\n","exports.OAuth = require(\"./lib/oauth\").OAuth;\nexports.OAuthEcho = require(\"./lib/oauth\").OAuthEcho;\nexports.OAuth2 = require(\"./lib/oauth2\").OAuth2;","function NullStore(options) {\n}\n\nNullStore.prototype.store = function(req, cb) {\n  cb();\n}\n\nNullStore.prototype.verify = function(req, providedState, cb) {\n  cb(null, true);\n}\n\n\nmodule.exports = NullStore;\n","var uid = require('uid2');\n\n/**\n * Creates an instance of `SessionStore`.\n *\n * This is the state store implementation for the OAuth2Strategy used when\n * the `state` option is enabled.  It generates a random state and stores it in\n * `req.session` and verifies it when the service provider redirects the user\n * back to the application.\n *\n * This state store requires session support.  If no session exists, an error\n * will be thrown.\n *\n * Options:\n *\n *   - `key`  The key in the session under which to store the state\n *\n * @constructor\n * @param {Object} options\n * @api public\n */\nfunction SessionStore(options) {\n  if (!options.key) { throw new TypeError('Session-based state store requires a session key'); }\n  this._key = options.key;\n}\n\n/**\n * Store request state.\n *\n * This implementation simply generates a random string and stores the value in\n * the session, where it will be used for verification when the user is\n * redirected back to the application.\n *\n * @param {Object} req\n * @param {Function} callback\n * @api protected\n */\nSessionStore.prototype.store = function(req, callback) {\n  if (!req.session) { return callback(new Error('OAuth 2.0 authentication requires session support when using state. Did you forget to use express-session middleware?')); }\n\n  var key = this._key;\n  var state = uid(24);\n  if (!req.session[key]) { req.session[key] = {}; }\n  req.session[key].state = state;\n  callback(null, state);\n};\n\n/**\n * Verify request state.\n *\n * This implementation simply compares the state parameter in the request to the\n * value generated earlier and stored in the session.\n *\n * @param {Object} req\n * @param {String} providedState\n * @param {Function} callback\n * @api protected\n */\nSessionStore.prototype.verify = function(req, providedState, callback) {\n  if (!req.session) { return callback(new Error('OAuth 2.0 authentication requires session support when using state. Did you forget to use express-session middleware?')); }\n\n  var key = this._key;\n  if (!req.session[key]) {\n    return callback(null, false, { message: 'Unable to verify authorization request state.' });\n  }\n\n  var state = req.session[key].state;\n  if (!state) {\n    return callback(null, false, { message: 'Unable to verify authorization request state.' });\n  }\n\n  delete req.session[key].state;\n  if (Object.keys(req.session[key]).length === 0) {\n    delete req.session[key];\n  }\n\n  if (state !== providedState) {\n    return callback(null, false, { message: 'Invalid authorization request state.' });\n  }\n\n  return callback(null, true);\n};\n\n// Expose constructor.\nmodule.exports = SessionStore;\n","var uid = require('uid2');\n\n/**\n * Creates an instance of `SessionStore`.\n *\n * This is the state store implementation for the OAuth2Strategy used when\n * the `state` option is enabled.  It generates a random state and stores it in\n * `req.session` and verifies it when the service provider redirects the user\n * back to the application.\n *\n * This state store requires session support.  If no session exists, an error\n * will be thrown.\n *\n * Options:\n *\n *   - `key`  The key in the session under which to store the state\n *\n * @constructor\n * @param {Object} options\n * @api public\n */\nfunction PKCESessionStore(options) {\n  if (!options.key) { throw new TypeError('Session-based state store requires a session key'); }\n  this._key = options.key;\n}\n\n/**\n * Store request state.\n *\n * This implementation simply generates a random string and stores the value in\n * the session, where it will be used for verification when the user is\n * redirected back to the application.\n *\n * @param {Object} req\n * @param {Function} callback\n * @api protected\n */\nPKCESessionStore.prototype.store = function(req, verifier, state, meta, callback) {\n  if (!req.session) { return callback(new Error('OAuth 2.0 authentication requires session support when using state. Did you forget to use express-session middleware?')); }\n\n  var key = this._key;\n  var state = {\n    handle: uid(24),\n    code_verifier: verifier\n  };\n  if (!req.session[key]) { req.session[key] = {}; }\n  req.session[key].state = state;\n  callback(null, state.handle);\n};\n\n/**\n * Verify request state.\n *\n * This implementation simply compares the state parameter in the request to the\n * value generated earlier and stored in the session.\n *\n * @param {Object} req\n * @param {String} providedState\n * @param {Function} callback\n * @api protected\n */\nPKCESessionStore.prototype.verify = function(req, providedState, callback) {\n  if (!req.session) { return callback(new Error('OAuth 2.0 authentication requires session support when using state. Did you forget to use express-session middleware?')); }\n\n  var key = this._key;\n  if (!req.session[key]) {\n    return callback(null, false, { message: 'Unable to verify authorization request state.' });\n  }\n\n  var state = req.session[key].state;\n  if (!state) {\n    return callback(null, false, { message: 'Unable to verify authorization request state.' });\n  }\n\n  delete req.session[key].state;\n  if (Object.keys(req.session[key]).length === 0) {\n    delete req.session[key];\n  }\n\n  if (state.handle !== providedState) {\n    return callback(null, false, { message: 'Invalid authorization request state.' });\n  }\n\n  return callback(null, state.code_verifier);\n};\n\n// Expose constructor.\nmodule.exports = PKCESessionStore;\n","/**\n * `AuthorizationError` error.\n *\n * AuthorizationError represents an error in response to an authorization\n * request.  For details, refer to RFC 6749, section 4.1.2.1.\n *\n * References:\n *   - [The OAuth 2.0 Authorization Framework](http://tools.ietf.org/html/rfc6749)\n *\n * @constructor\n * @param {String} [message]\n * @param {String} [code]\n * @param {String} [uri]\n * @param {Number} [status]\n * @api public\n */\nfunction AuthorizationError(message, code, uri, status) {\n  if (!status) {\n    switch (code) {\n      case 'access_denied': status = 403; break;\n      case 'server_error': status = 502; break;\n      case 'temporarily_unavailable': status = 503; break;\n    }\n  }\n\n  Error.call(this);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = message;\n  this.code = code || 'server_error';\n  this.uri = uri;\n  this.status = status || 500;\n}\n\n/**\n * Inherit from `Error`.\n */\nAuthorizationError.prototype.__proto__ = Error.prototype;\n\n\n/**\n * Expose `AuthorizationError`.\n */\nmodule.exports = AuthorizationError;\n","/**\n * `TokenError` error.\n *\n * TokenError represents an error received from a token endpoint.  For details,\n * refer to RFC 6749, section 5.2.\n *\n * References:\n *   - [The OAuth 2.0 Authorization Framework](http://tools.ietf.org/html/rfc6749)\n *\n * @constructor\n * @param {String} [message]\n * @param {String} [code]\n * @param {String} [uri]\n * @param {Number} [status]\n * @api public\n */\nfunction TokenError(message, code, uri, status) {\n  Error.call(this);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = message;\n  this.code = code || 'invalid_request';\n  this.uri = uri;\n  this.status = status || 500;\n}\n\n/**\n * Inherit from `Error`.\n */\nTokenError.prototype.__proto__ = Error.prototype;\n\n\n/**\n * Expose `TokenError`.\n */\nmodule.exports = TokenError;\n","/**\n * `InternalOAuthError` error.\n *\n * InternalOAuthError wraps errors generated by node-oauth.  By wrapping these\n * objects, error messages can be formatted in a manner that aids in debugging\n * OAuth issues.\n *\n * @constructor\n * @param {String} [message]\n * @param {Object|Error} [err]\n * @api public\n */\nfunction InternalOAuthError(message, err) {\n  Error.call(this);\n  Error.captureStackTrace(this, this.constructor);\n  this.name = this.constructor.name;\n  this.message = message;\n  this.oauthError = err;\n}\n\n/**\n * Inherit from `Error`.\n */\nInternalOAuthError.prototype.__proto__ = Error.prototype;\n\n/**\n * Returns a string representing the error.\n *\n * @return {String}\n * @api public\n */\nInternalOAuthError.prototype.toString = function() {\n  var m = this.name;\n  if (this.message) { m += ': ' + this.message; }\n  if (this.oauthError) {\n    if (this.oauthError instanceof Error) {\n      m = this.oauthError.toString();\n    } else if (this.oauthError.statusCode && this.oauthError.data) {\n      m += ' (status: ' + this.oauthError.statusCode + ' data: ' + this.oauthError.data + ')';\n    }\n  }\n  return m;\n};\n\n\n/**\n * Expose `InternalOAuthError`.\n */\nmodule.exports = InternalOAuthError;\n","// Load modules.\nvar passport = require('passport-strategy')\n  , url = require('url')\n  , uid = require('uid2')\n  , crypto = require('crypto')\n  , base64url = require('base64url')\n  , util = require('util')\n  , utils = require('./utils')\n  , OAuth2 = require('oauth').OAuth2\n  , NullStateStore = require('./state/null')\n  , SessionStateStore = require('./state/session')\n  , PKCESessionStateStore = require('./state/pkcesession')\n  , AuthorizationError = require('./errors/authorizationerror')\n  , TokenError = require('./errors/tokenerror')\n  , InternalOAuthError = require('./errors/internaloautherror');\n\n\n/**\n * Creates an instance of `OAuth2Strategy`.\n *\n * The OAuth 2.0 authentication strategy authenticates requests using the OAuth\n * 2.0 framework.\n *\n * OAuth 2.0 provides a facility for delegated authentication, whereby users can\n * authenticate using a third-party service such as Facebook.  Delegating in\n * this manner involves a sequence of events, including redirecting the user to\n * the third-party service for authorization.  Once authorization has been\n * granted, the user is redirected back to the application and an authorization\n * code can be used to obtain credentials.\n *\n * Applications must supply a `verify` callback, for which the function\n * signature is:\n *\n *     function(accessToken, refreshToken, profile, done) { ... }\n *\n * The verify callback is responsible for finding or creating the user, and\n * invoking `done` with the following arguments:\n *\n *     done(err, user, info);\n *\n * `user` should be set to `false` to indicate an authentication failure.\n * Additional `info` can optionally be passed as a third argument, typically\n * used to display informational messages.  If an exception occured, `err`\n * should be set.\n *\n * Options:\n *\n *   - `authorizationURL`  URL used to obtain an authorization grant\n *   - `tokenURL`          URL used to obtain an access token\n *   - `clientID`          identifies client to service provider\n *   - `clientSecret`      secret used to establish ownership of the client identifer\n *   - `callbackURL`       URL to which the service provider will redirect the user after obtaining authorization\n *   - `passReqToCallback` when `true`, `req` is the first argument to the verify callback (default: `false`)\n *\n * Examples:\n *\n *     passport.use(new OAuth2Strategy({\n *         authorizationURL: 'https://www.example.com/oauth2/authorize',\n *         tokenURL: 'https://www.example.com/oauth2/token',\n *         clientID: '123-456-789',\n *         clientSecret: 'shhh-its-a-secret'\n *         callbackURL: 'https://www.example.net/auth/example/callback'\n *       },\n *       function(accessToken, refreshToken, profile, done) {\n *         User.findOrCreate(..., function (err, user) {\n *           done(err, user);\n *         });\n *       }\n *     ));\n *\n * @constructor\n * @param {Object} options\n * @param {Function} verify\n * @api public\n */\nfunction OAuth2Strategy(options, verify) {\n  if (typeof options == 'function') {\n    verify = options;\n    options = undefined;\n  }\n  options = options || {};\n\n  if (!verify) { throw new TypeError('OAuth2Strategy requires a verify callback'); }\n  if (!options.authorizationURL) { throw new TypeError('OAuth2Strategy requires a authorizationURL option'); }\n  if (!options.tokenURL) { throw new TypeError('OAuth2Strategy requires a tokenURL option'); }\n  if (!options.clientID) { throw new TypeError('OAuth2Strategy requires a clientID option'); }\n\n  passport.Strategy.call(this);\n  this.name = 'oauth2';\n  this._verify = verify;\n\n  // NOTE: The _oauth2 property is considered \"protected\".  Subclasses are\n  //       allowed to use it when making protected resource requests to retrieve\n  //       the user profile.\n  this._oauth2 = new OAuth2(options.clientID,  options.clientSecret,\n                            '', options.authorizationURL, options.tokenURL, options.customHeaders);\n\n  this._callbackURL = options.callbackURL;\n  this._scope = options.scope;\n  this._scopeSeparator = options.scopeSeparator || ' ';\n  this._pkceMethod = (options.pkce === true) ? 'S256' : options.pkce;\n  this._key = options.sessionKey || ('oauth2:' + url.parse(options.authorizationURL).hostname);\n\n  if (options.store) {\n    this._stateStore = options.store;\n  } else {\n    if (options.state) {\n      this._stateStore = options.pkce ? new PKCESessionStateStore({ key: this._key }) : new SessionStateStore({ key: this._key });\n    } else {\n      if (options.pkce) { throw new TypeError('OAuth2Strategy requires `state: true` option when PKCE is enabled'); }\n      this._stateStore = new NullStateStore();\n    }\n  }\n  this._trustProxy = options.proxy;\n  this._passReqToCallback = options.passReqToCallback;\n  this._skipUserProfile = (options.skipUserProfile === undefined) ? false : options.skipUserProfile;\n}\n\n// Inherit from `passport.Strategy`.\nutil.inherits(OAuth2Strategy, passport.Strategy);\n\n\n/**\n * Authenticate request by delegating to a service provider using OAuth 2.0.\n *\n * @param {Object} req\n * @api protected\n */\nOAuth2Strategy.prototype.authenticate = function(req, options) {\n  options = options || {};\n  var self = this;\n\n  if (req.query && req.query.error) {\n    if (req.query.error == 'access_denied') {\n      return this.fail({ message: req.query.error_description });\n    } else {\n      return this.error(new AuthorizationError(req.query.error_description, req.query.error, req.query.error_uri));\n    }\n  }\n\n  var callbackURL = options.callbackURL || this._callbackURL;\n  if (callbackURL) {\n    var parsed = url.parse(callbackURL);\n    if (!parsed.protocol) {\n      // The callback URL is relative, resolve a fully qualified URL from the\n      // URL of the originating request.\n      callbackURL = url.resolve(utils.originalURL(req, { proxy: this._trustProxy }), callbackURL);\n    }\n  }\n\n  var meta = {\n    authorizationURL: this._oauth2._authorizeUrl,\n    tokenURL: this._oauth2._accessTokenUrl,\n    clientID: this._oauth2._clientId\n  }\n\n  if (req.query && req.query.code) {\n    function loaded(err, ok, state) {\n      if (err) { return self.error(err); }\n      if (!ok) {\n        return self.fail(state, 403);\n      }\n\n      var code = req.query.code;\n\n      var params = self.tokenParams(options);\n      params.grant_type = 'authorization_code';\n      if (callbackURL) { params.redirect_uri = callbackURL; }\n      if (typeof ok == 'string') { // PKCE\n        params.code_verifier = ok;\n      }\n\n      self._oauth2.getOAuthAccessToken(code, params,\n        function(err, accessToken, refreshToken, params) {\n          if (err) { return self.error(self._createOAuthError('Failed to obtain access token', err)); }\n\n          self._loadUserProfile(accessToken, function(err, profile) {\n            if (err) { return self.error(err); }\n\n            function verified(err, user, info) {\n              if (err) { return self.error(err); }\n              if (!user) { return self.fail(info); }\n\n              info = info || {};\n              if (state) { info.state = state; }\n              self.success(user, info);\n            }\n\n            try {\n              if (self._passReqToCallback) {\n                var arity = self._verify.length;\n                if (arity == 6) {\n                  self._verify(req, accessToken, refreshToken, params, profile, verified);\n                } else { // arity == 5\n                  self._verify(req, accessToken, refreshToken, profile, verified);\n                }\n              } else {\n                var arity = self._verify.length;\n                if (arity == 5) {\n                  self._verify(accessToken, refreshToken, params, profile, verified);\n                } else { // arity == 4\n                  self._verify(accessToken, refreshToken, profile, verified);\n                }\n              }\n            } catch (ex) {\n              return self.error(ex);\n            }\n          });\n        }\n      );\n    }\n\n    var state = req.query.state;\n    try {\n      var arity = this._stateStore.verify.length;\n      if (arity == 4) {\n        this._stateStore.verify(req, state, meta, loaded);\n      } else { // arity == 3\n        this._stateStore.verify(req, state, loaded);\n      }\n    } catch (ex) {\n      return this.error(ex);\n    }\n  } else {\n    var params = this.authorizationParams(options);\n    params.response_type = 'code';\n    if (callbackURL) { params.redirect_uri = callbackURL; }\n    var scope = options.scope || this._scope;\n    if (scope) {\n      if (Array.isArray(scope)) { scope = scope.join(this._scopeSeparator); }\n      params.scope = scope;\n    }\n    var verifier, challenge;\n\n    if (this._pkceMethod) {\n      verifier = base64url(crypto.pseudoRandomBytes(32))\n      switch (this._pkceMethod) {\n      case 'plain':\n        challenge = verifier;\n        break;\n      case 'S256':\n        challenge = base64url(crypto.createHash('sha256').update(verifier).digest());\n        break;\n      default:\n        return this.error(new Error('Unsupported code verifier transformation method: ' + this._pkceMethod));\n      }\n      \n      params.code_challenge = challenge;\n      params.code_challenge_method = this._pkceMethod;\n    }\n\n    var state = options.state;\n    if (state) {\n      params.state = state;\n      \n      var parsed = url.parse(this._oauth2._authorizeUrl, true);\n      utils.merge(parsed.query, params);\n      parsed.query['client_id'] = this._oauth2._clientId;\n      delete parsed.search;\n      var location = url.format(parsed);\n      this.redirect(location);\n    } else {\n      function stored(err, state) {\n        if (err) { return self.error(err); }\n\n        if (state) { params.state = state; }\n        var parsed = url.parse(self._oauth2._authorizeUrl, true);\n        utils.merge(parsed.query, params);\n        parsed.query['client_id'] = self._oauth2._clientId;\n        delete parsed.search;\n        var location = url.format(parsed);\n        self.redirect(location);\n      }\n\n      try {\n        var arity = this._stateStore.store.length;\n        if (arity == 5) {\n          this._stateStore.store(req, verifier, undefined, meta, stored);\n        } else if (arity == 3) {\n          this._stateStore.store(req, meta, stored);\n        } else { // arity == 2\n          this._stateStore.store(req, stored);\n        }\n      } catch (ex) {\n        return this.error(ex);\n      }\n    }\n  }\n};\n\n/**\n * Retrieve user profile from service provider.\n *\n * OAuth 2.0-based authentication strategies can overrride this function in\n * order to load the user's profile from the service provider.  This assists\n * applications (and users of those applications) in the initial registration\n * process by automatically submitting required information.\n *\n * @param {String} accessToken\n * @param {Function} done\n * @api protected\n */\nOAuth2Strategy.prototype.userProfile = function(accessToken, done) {\n  return done(null, {});\n};\n\n/**\n * Return extra parameters to be included in the authorization request.\n *\n * Some OAuth 2.0 providers allow additional, non-standard parameters to be\n * included when requesting authorization.  Since these parameters are not\n * standardized by the OAuth 2.0 specification, OAuth 2.0-based authentication\n * strategies can overrride this function in order to populate these parameters\n * as required by the provider.\n *\n * @param {Object} options\n * @return {Object}\n * @api protected\n */\nOAuth2Strategy.prototype.authorizationParams = function(options) {\n  return {};\n};\n\n/**\n * Return extra parameters to be included in the token request.\n *\n * Some OAuth 2.0 providers allow additional, non-standard parameters to be\n * included when requesting an access token.  Since these parameters are not\n * standardized by the OAuth 2.0 specification, OAuth 2.0-based authentication\n * strategies can overrride this function in order to populate these parameters\n * as required by the provider.\n *\n * @return {Object}\n * @api protected\n */\nOAuth2Strategy.prototype.tokenParams = function(options) {\n  return {};\n};\n\n/**\n * Parse error response from OAuth 2.0 endpoint.\n *\n * OAuth 2.0-based authentication strategies can overrride this function in\n * order to parse error responses received from the token endpoint, allowing the\n * most informative message to be displayed.\n *\n * If this function is not overridden, the body will be parsed in accordance\n * with RFC 6749, section 5.2.\n *\n * @param {String} body\n * @param {Number} status\n * @return {Error}\n * @api protected\n */\nOAuth2Strategy.prototype.parseErrorResponse = function(body, status) {\n  var json = JSON.parse(body);\n  if (json.error) {\n    return new TokenError(json.error_description, json.error, json.error_uri);\n  }\n  return null;\n};\n\n/**\n * Load user profile, contingent upon options.\n *\n * @param {String} accessToken\n * @param {Function} done\n * @api private\n */\nOAuth2Strategy.prototype._loadUserProfile = function(accessToken, done) {\n  var self = this;\n\n  function loadIt() {\n    return self.userProfile(accessToken, done);\n  }\n  function skipIt() {\n    return done(null);\n  }\n\n  if (typeof this._skipUserProfile == 'function' && this._skipUserProfile.length > 1) {\n    // async\n    this._skipUserProfile(accessToken, function(err, skip) {\n      if (err) { return done(err); }\n      if (!skip) { return loadIt(); }\n      return skipIt();\n    });\n  } else {\n    var skip = (typeof this._skipUserProfile == 'function') ? this._skipUserProfile() : this._skipUserProfile;\n    if (!skip) { return loadIt(); }\n    return skipIt();\n  }\n};\n\n/**\n * Create an OAuth error.\n *\n * @param {String} message\n * @param {Object|Error} err\n * @api private\n */\nOAuth2Strategy.prototype._createOAuthError = function(message, err) {\n  var e;\n  if (err.statusCode && err.data) {\n    try {\n      e = this.parseErrorResponse(err.data, err.statusCode);\n    } catch (_) {}\n  }\n  if (!e) { e = new InternalOAuthError(message, err); }\n  return e;\n};\n\n\n// Expose constructor.\nmodule.exports = OAuth2Strategy;\n","// Load modules.\nvar Strategy = require('./strategy')\n  , AuthorizationError = require('./errors/authorizationerror')\n  , TokenError = require('./errors/tokenerror')\n  , InternalOAuthError = require('./errors/internaloautherror');\n\n\n// Expose Strategy.\nexports = module.exports = Strategy;\n\n// Exports.\nexports.Strategy = Strategy;\n\nexports.AuthorizationError = AuthorizationError;\nexports.TokenError = TokenError;\nexports.InternalOAuthError = InternalOAuthError;\n","interface UserInfoRaw {\n  user: {\n    uid: string\n    email: string\n    name: string\n    username: string\n    avatar: string\n  }\n}\n\nexport interface Profile {\n  _raw?: string\n  _json?: UserInfoRaw\n  id?: string\n  displayName?: string\n  emails?: { value: string }[]\n  photos?: { value: string }[]\n  provider?: string\n  username?: string\n}\n\nexport function parseUserProfile(userInfo: UserInfoRaw) {\n  const profile: Profile = {}\n  profile.id = userInfo.user.uid\n  profile.displayName = userInfo.user.name\n  profile.username = userInfo.user.username\n  if (userInfo.user.email) {\n    profile.emails = [{ value: userInfo.user.email }]\n  }\n  if (userInfo.user.avatar) {\n    profile.photos = [{ value: `https://vercel.com/api/www/avatar/${userInfo.user.avatar}?s=600` }]\n  }\n  return profile\n}\n","export default class APIError extends Error {\n  public name = 'APIError'\n  public status = 500\n}\n","import OAuth2Strategy, { InternalOAuthError, VerifyFunction } from 'passport-oauth2'\n\nimport { parseUserProfile } from './profile'\nimport APIError from './apiError'\n\nconst STRATEGY_NAME = 'vercel'\nconst PROVIDER_NAME = 'vercel'\nconst USER_PROFILE_URL = 'https://api.vercel.com/www/user'\nconst AUTHORIZATION_URL = 'https://vercel.com/oauth/authorize'\nconst TOKEN_URL = 'https://vercel.com/v2/oauth/access_token'\n\ninterface StrategyOptions {\n  clientID: string\n  clientSecret: string\n  callbackURL: string\n  state?: boolean\n}\n\nexport default class Strategy extends OAuth2Strategy {\n  constructor(options: StrategyOptions, verify: VerifyFunction) {\n    const { state = false } = options\n    const superOptions = {\n      ...options,\n      state,\n      authorizationURL: AUTHORIZATION_URL,\n      tokenURL: TOKEN_URL\n    }\n    super(superOptions, verify)\n    this.name = STRATEGY_NAME\n    this._oauth2.useAuthorizationHeaderforGET(true)\n  }\n\n  userProfile(accessToken: string, done: (error: Error | null, profile?: any) => void) {\n    this._oauth2.get(USER_PROFILE_URL, accessToken, function(err, body, _) {\n      let json\n      if (err) {\n        if (err.data) {\n          try {\n            json = JSON.parse(err.data)\n          } catch (_) {} // tslint:disable-line no-empty\n        }\n        if (json && json.message) {\n          return done(new APIError(json.message))\n        }\n        return done(new InternalOAuthError('Failed to fetch user profile', err))\n      }\n      const _body = body ? body.toString() : ''\n      try {\n        json = JSON.parse(_body)\n      } catch (_) {\n        return done(new Error('Failed to parse user profile (invalid JSON)'))\n      }\n      const profile = parseUserProfile(json)\n      profile.provider = PROVIDER_NAME\n      profile._raw = _body\n      profile._json = json\n      done(null, profile)\n    })\n  }\n}\n","import _Strategy from './strategy'\nexport default _Strategy\nexport const Strategy = _Strategy\n"],"names":["Strategy","pad_string_1","require$$0","url","URL","OAuthUtils","require$$1","uid","OAuth2","passport","PKCESessionStateStore","SessionStateStore","NullStateStore","AuthorizationError","base64url","TokenError","InternalOAuthError","OAuth2Strategy","_Strategy"],"mappings":"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"}